```1С
Функция ЗаписатьОбъект(Объект, СтруктурыОбъекта, ДопПараметры, ЭтоДокумент, 
	ЭтоГруппа, СвойстваОбъекта,  НовыеАтрибутыВладельца = Неопределено, 
	ТекстОшибки = "")
	
	Результат = Ложь;
	НужноЗаписать = Истина;
	ЭтоНовый = Объект.ЭтоНовый();
	
	Если НовыеАтрибутыВладельца = Неопределено Тогда
		НовыеАтрибутыВладельца = Новый Структура;
	КонецЕсли;
	
	Попытка
		
		Если ЭтоДокумент = Неопределено Тогда
			ЭтоДокумент = Документы.ТипВсеСсылки().СодержитТип(ТипЗнч(Объект.Ссылка));
		КонецЕсли;

		// Разберемся со стандартными реквизитами.
		Если ЭтоДокумент Тогда
			ЭтоГруппа = Ложь;
			Если ЭтоНовый Тогда
				Объект.УстановитьНовыйНомер();
			КонецЕсли;
		Иначе		
			Если Объект.Предопределенный И Объект.ПометкаУдаления Тогда
				Объект.ПометкаУдаления = Ложь;
			КонецЕсли;
		КонецЕсли;
			
		Если (ЭтоГруппа = Неопределено) ИЛИ (ТипЗнч(ЭтоГруппа) <> Тип("Булево")) Тогда
			Если НЕ СвойстваОбъекта.Свойство("ЭтоГруппа") Тогда
				ЭтоГруппа = Ложь;
			Иначе
				ЭтоГруппа = СвойстваОбъекта.ЭтоГруппа;
			КонецЕсли;
		КонецЕсли;
		
		// Переменные защиты от зацикливания
		СчетчикЦикла = 0;
		КоличествоФунккций = 0;
		
		Пока НужноЗаписать И (СчетчикЦикла <= (КоличествоФунккций+1)) Цикл
			СчетчикЦикла = СчетчикЦикла + 1;
			Попытка
				Если УстанавливатьПризнакОбмена Тогда
					Объект.ОбменДанными.Отправитель = ДопПараметры.Отправитель;
					Объект.ОбменДанными.Загрузка = Истина;
				КонецЕсли;
			Исключение
				ТекстОшибки = ПодробноеПредставлениеОшибки(ИнформацияОбОшибке());
			КонецПопытки;
			
			Попытка
				Объект.Записать();
				НужноЗаписать = Ложь;
			Исключение 
				ТекстОшибки = ПодробноеПредставлениеОшибки(ИнформацияОбОшибке());
				Прервать;
			КонецПопытки;
			
			СтрокиСДопФункций = СтруктурыОбъекта.НайтиСтроки(Новый Структура("Вид","Фун"));
			НомерФункции = 0;
			Для Каждого СтрокаФункции ИЗ СтрокиСДопФункций Цикл
				НомерФункции = НомерФункции + 1;
				КоличествоФунккций = ?(НомерФункции > КоличествоФунккций, НомерФункции, КоличествоФунккций);
				Если ЗначениеЗаполнено(СтрокаФункции.Использование) Тогда
				    Попытка 
						Если ЗначениеЗаполнено(СтрокаФункции.ИмяФункции) Тогда
							Выполнить(СтрокаФункции.ИмяФункции);
						КонецЕсли;
					Исключение
						ТекстОшибки = ПодробноеПредставлениеОшибки(ИнформацияОбОшибке());
					КонецПопытки;
				КонецЕсли;
			КонецЦикла; 
			
		КонецЦикла;
	Исключение
		ТекстОшибки = ПодробноеПредставлениеОшибки(ИнформацияОбОшибке());
		ЗаписьЖурналаРегистрации(Событие, УровеньЖурналаРегистрации.Ошибка, , Объект, ТекстОшибки);
	КонецПопытки;
	
	Возврат Результат;
	
КонецФункции```